!function(a,b){"use strict";function h(){a("body").addClass("js"),a(".carousel").each(function(){var b=a(this).find("li").first().width();a(this).bxSlider({slideWidth:b,minSlides:1,maxSlides:a(this).data("bx-max-slides")||5,slideMargin:a(this).data("bx-slide-margin")||10,pager:a(this).data("bx-pager")||!1})}),a(".micro-nav").on("click",function(){a(".main-nav").slideToggle()}),a(b).resize(k),"orientationchange"in b&&a(b).on("orientationchange",k),j(),i()}function i(){function c(a){return"undefined"==typeof a.val()||""===a.val().trim()?(a.parent().addClass("invalid"),!1):(a.parent().removeClass("invalid"),!0)}function d(c){if("success"===c.responseText){b.slideUp(500);var e=a("[data-contact-response]");ga("send","event","form","submit","contact"),e.slideDown(500)}else b.prepend("<p>There was an error sending your message, please consider emailing us directly.</p>")}var b=a(".contact-form");0!=b.length&&(b.on("change","input, textarea",function(){c(a(this))}),b.find("input[type=submit]").on("click",function(e){e.preventDefault();var f="&"+a(this).attr("name")+"="+a(this).attr("value"),g=!0;b.find("[data-required]").each(function(){var b=c(a(this));g=g?b:!1}),g&&a.ajax({url:b.attr("action"),method:b.attr("method"),data:b.serialize()+f}).complete(d)}))}function j(){var c=a("#areamap").first();0!=c.length&&(global.gmapInit=function(){b.google.maps.visualRefresh=!0;var a,d={zoom:10,draggable:!1,center:new google.maps.LatLng(51.4550131,-2.5865895),streetViewControl:!1,zoomControl:!1,panControl:!1,scaleControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};a=new google.maps.Map(c[0],d);var e=[];for(var f in ContactMapCoords)e.push(new google.maps.LatLng(ContactMapCoords[f][0],ContactMapCoords[f][1]));var g=new google.maps.Polygon({paths:e,strokeColor:"#00f",strokeOpacity:.8,strokeWeight:1,fillColor:"#00f",fillOpacity:.2}),h=new google.maps.InfoWindow({content:ContactMapCallout,maxWidth:200,height:200});google.maps.event.addListener(g,"click",function(b){h.setPosition(b.latLng),h.open(a)}),g.setMap(a)},a.getScript("//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=global.gmapInit"))}function k(){b.innerWidth<=490?(d=setTimeout(l,100),e="small"):b.innerWidth<=768?(d=setTimeout(l,100),e="mid"):(d=setTimeout(l,100),e="large")}function l(){switch(e){case"large":a(".main-nav").attr("style",null);break;case"small":}}var d=0,e="large";b.global={},a.fn.absoluteHeight=function(){var b=["height","paddingTop","paddingBottom","marginTop","marginBottom"],c=0;for(var d in b){var e=parseInt(a(this).css(b[d]));isNaN(e)||(c+=e)}return c},a.fn.absoluteWidth=function(){var b=["width","paddingLeft","paddingRight","marginLeft","marginRight"],c=0;for(var d in b){var e=parseInt(a(this).css(b[d]));isNaN(e)||(c+=e)}return c};var f=a(document),g=b.Modernizr;a(document).ready(function(){a.fn.foundationAlerts?f.foundationAlerts():null,a.fn.foundationButtons?f.foundationButtons():null,a.fn.foundationAccordion?f.foundationAccordion():null,a.fn.foundationNavigation?f.foundationNavigation():null,a.fn.foundationTopBar?f.foundationTopBar():null,a.fn.foundationCustomForms?f.foundationCustomForms():null,a.fn.foundationMediaQueryViewer?f.foundationMediaQueryViewer():null,a.fn.foundationTabs?f.foundationTabs({callback:a.foundation.customForms.appendCustomMarkup}):null,a.fn.foundationTooltips?f.foundationTooltips():null,a.fn.foundationMagellan?f.foundationMagellan():null,a.fn.foundationClearing?f.foundationClearing():null,a.fn.placeholder?a("input, textarea").placeholder():null}),a(b).load(h),g.touch&&!b.location.hash&&a(b).load(function(){setTimeout(function(){b.scrollTo(0,1)},0)}),a("[data-toggle]").each(function(){var b=a(this).data("toggle");a(this).on("click",function(){if("large"!==e){var c=a(this).siblings('[data-toggle-target="'+b+'"]');c.is(":visible")?c.slideUp(function(){a(this).removeAttr("style")}):c.slideDown()}})}),k()}(jQuery,this),function(a){var b={},c=a(".work-gallery"),d=a(".showcase"),e="active-item",f=3,g=[[768,3],[490,2],[0,1]];c.on("click",".item",function(h){h.preventDefault();var i=window.innerWidth,j=a(this),l=(a(this).find("img").attr("src").replace(/\d+[x]\d+/g,"280x200"),a(this).parent().children().index(a(this))+1),m=j.position().top+j.height(),n=g.filter(function(a){return i>parseInt(a)});if(f=parseInt(n[0][1]),a(this).hasClass(e)&&d.is(":visible"))return d.fadeOut(),a(this).removeClass(e),void 0;var o=c.find("."+e).removeClass(e);a(this).addClass(e);var p=a(".item").index(o),r=(Math.floor(p/f),a(".item").index(a(this)));Math.floor(r/f),l=Math.round(r/f%1*f)+1;var t;return b.active===j.data("name")?(d.fadeIn(),void 0):(d.find(".showcase-content").html('<div class="loading"></div>').end().css("top",m).attr("class","showcase col"+l).fadeIn(),a.ajax({url:"/work_project/"+j.data("name")+"/",method:"get"}).complete(function(c,e){"success"===e&&(t=a(c.responseText).find("[data-ajax-content]"),b.active=j.data("name"),d.find(".showcase-content").html(t.hide().fadeIn()),a("body").animate({scrollTop:d.offset().top-lo100}))}),d.find(".close").on("click",function(){console.log("ffs"),d.fadeOut()}),d.on("click",".feature-image-item",function(){console.log("clicked");var b=a(this).data("large-url"),c=a(this).attr("alt"),e=a("<img>").attr("src",b).attr("alt",c),f=a(".feature-image img",d);e.on("load",function(){f.fadeOut(function(){a(this).replaceWith(e),e.fadeIn()})})}),void 0)})}(jQuery),function(a){function c(){b++<80?ga("send","event","Bounce Preventer 3001","Preventing bounces since 1404854771443",""):clearInterval(d)}var b=0,d=setInterval(c,15e3);"function"==typeof ga&&(a("[data-contact]").on("click",function(b){b.preventDefault();var c=a(this).attr("href");ga("send","event","header","contact",a(this).data("contact")),setTimeout(function(){window.location=c},300)}),a(""))}(jQuery);