!function(t,n){"use strict";function a(){t("body").addClass("js"),t(".carousel").each(function(){var n=t(this).find("li").first().width();t(this).bxSlider({slideWidth:n,minSlides:1,maxSlides:t(this).data("bx-max-slides")||5,slideMargin:t(this).data("bx-slide-margin")||10,pager:t(this).data("bx-pager")||!1})}),t(".micro-nav").on("click",function(){t(".main-nav").slideToggle()}),t(n).resize(i),"orientationchange"in n&&t(n).on("orientationchange",i),e(),o()}function o(){function n(t){return"undefined"==typeof t.val()||""===t.val().trim()?(t.parent().addClass("invalid"),!1):(t.parent().removeClass("invalid"),!0)}function a(n){if("success"===n.responseText){o.slideUp(500);var a=t("[data-contact-response]");a.slideDown(500)}else o.prepend("<p>There was an error sending your message, please consider emailing us directly.</p>")}var o=t(".contact-form");0!=o.length&&(o.on("change","input, textarea",function(){n(t(this))}),o.find("input[type=submit]").on("click",function(e){e.preventDefault();var i="&"+t(this).attr("name")+"="+t(this).attr("value"),s=!0;o.find("[data-required]").each(function(){var a=n(t(this));s=s?a:!1}),s&&t.ajax({url:o.attr("action"),method:o.attr("method"),data:o.serialize()+i}).complete(a)}))}function e(){var a=t("#areamap").first();0!=a.length&&(global.gmapInit=function(){n.google.maps.visualRefresh=!0;var t,o={zoom:10,draggable:!1,center:new google.maps.LatLng(51.4550131,-2.5865895),streetViewControl:!1,zoomControl:!1,panControl:!1,scaleControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};t=new google.maps.Map(a[0],o);var e=[];for(var i in ContactMapCoords)e.push(new google.maps.LatLng(ContactMapCoords[i][0],ContactMapCoords[i][1]));var s=new google.maps.Polygon({paths:e,strokeColor:"#00f",strokeOpacity:.8,strokeWeight:1,fillColor:"#00f",fillOpacity:.2}),l=new google.maps.InfoWindow({content:ContactMapCallout,maxWidth:200,height:200});google.maps.event.addListener(s,"click",function(n){l.setPosition(n.latLng),l.open(t)}),s.setMap(t)},t.getScript("//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=global.gmapInit"))}function i(){n.innerWidth<=490?(l=setTimeout(s,100),r="small"):n.innerWidth<=768?(l=setTimeout(s,100),r="mid"):(l=setTimeout(s,100),r="large")}function s(){switch(r){case"large":t(".main-nav").attr("style",null);break;case"small":}}var l=0,r="large";n.global={},t.fn.absoluteHeight=function(){var n=["height","paddingTop","paddingBottom","marginTop","marginBottom"],a=0;for(var o in n){var e=parseInt(t(this).css(n[o]));isNaN(e)||(a+=e)}return a},t.fn.absoluteWidth=function(){var n=["width","paddingLeft","paddingRight","marginLeft","marginRight"],a=0;for(var o in n){var e=parseInt(t(this).css(n[o]));isNaN(e)||(a+=e)}return a};var d=t(document),c=n.Modernizr;t(document).ready(function(){t.fn.foundationAlerts?d.foundationAlerts():null,t.fn.foundationButtons?d.foundationButtons():null,t.fn.foundationAccordion?d.foundationAccordion():null,t.fn.foundationNavigation?d.foundationNavigation():null,t.fn.foundationTopBar?d.foundationTopBar():null,t.fn.foundationCustomForms?d.foundationCustomForms():null,t.fn.foundationMediaQueryViewer?d.foundationMediaQueryViewer():null,t.fn.foundationTabs?d.foundationTabs({callback:t.foundation.customForms.appendCustomMarkup}):null,t.fn.foundationTooltips?d.foundationTooltips():null,t.fn.foundationMagellan?d.foundationMagellan():null,t.fn.foundationClearing?d.foundationClearing():null,t.fn.placeholder?t("input, textarea").placeholder():null}),t(n).load(a),c.touch&&!n.location.hash&&t(n).load(function(){setTimeout(function(){n.scrollTo(0,1)},0)}),t("[data-toggle]").each(function(){var n=t(this).data("toggle");t(this).on("click",function(){if("large"!==r){var a=t(this).siblings('[data-toggle-target="'+n+'"]');a.is(":visible")?a.slideUp(function(){t(this).removeAttr("style")}):a.slideDown()}})}),i()}(jQuery,this),function(t){var n={},a=t(".work-gallery"),o=t(".showcase"),e="active-item",i=3,s=[[768,3],[490,2],[0,1]];a.on("click",".item",function(l){l.preventDefault();var r=window.innerWidth,d=t(this),c=(t(this).find("img").attr("src").replace(/\d+[x]\d+/g,"280x200"),t(this).parent().children().index(t(this))+1),u=d.position().top+d.height(),f=s.filter(function(t){return r>parseInt(t)});if(i=parseInt(f[0][1]),t(this).hasClass(e)&&o.is(":visible"))return o.fadeOut(),t(this).removeClass(e),void 0;var g=a.find("."+e).removeClass(e);t(this).addClass(e);var p=t(".item").index(g),h=(Math.floor(p/i),t(".item").index(t(this)));Math.floor(h/i),c=Math.round(h/i%1*i)+1;var m;return n.active===d.data("name")?(o.fadeIn(),void 0):(o.find(".showcase-content").html('<div class="loading"></div>').end().css("top",u).attr("class","showcase col"+c).fadeIn(),t.ajax({url:"/work_project/"+d.data("name")+"/",method:"get"}).complete(function(a,e){"success"===e&&(m=t(a.responseText).find("[data-ajax-content]"),n.active=d.data("name"),o.find(".showcase-content").html(m.hide().fadeIn()),t("body").animate({scrollTop:o.offset().top-100}))}),o.find(".close").on("click",function(){console.log("ffs"),o.fadeOut()}),o.on("click",".feature-image-item",function(){console.log("clicked");var n=t(this).data("large-url"),a=t(this).attr("alt"),e=t("<img>").attr("src",n).attr("alt",a),i=t(".feature-image img",o);e.on("load",function(){i.fadeOut(function(){t(this).replaceWith(e),e.fadeIn()})})}),void 0)})}(jQuery);